#! /bin/bash
# Create an empty Jekyll post
# $1 = title of the post

# Retrieving the date and the title
DATE=$(date +"%F")

if [ -z "$1" ]; then
    TITLE="Empty title"
else
    TITLE="$1"
fi

# Creating the filename
# -> replacing capital letters
# -> converting spaces to dashes
# -> removing accents
# -> removing ponctuation symbols like : , / ? / ! / : / .
# -> trailing spaces

NAME=$(echo "$TITLE" | tr "[A-Z]" "[a-z]" |
sed -e 'y/áàâäçéèêëîïìôöóùúüñÂÀÄÇÉÈÊËÎÏÔÖÙÜÑ/aaaaceeeeiiiooouuunAAACEEEEIIOOUUN/' \
    -e 's/ /-/g' |
    tr -d ',' |
    tr -d '?' |
    tr -d '!' |
    tr -d ':' |
    tr -d '.' |
    sed -e 's/-*$//g'
    )

FILENAME="$DATE-$NAME.md"

if [ -f "$FILENAME" ]; then
    echo "Filename : $FILENAME already exists !"
    echo "Stopping..."
    exit 1
fi

# Creating the file
touch "$FILENAME"

echo "---
layout: post
title: $1
comments: false
categories:
- Blog
---

Some text
" > "$FILENAME"

echo "$FILENAME have been created !"


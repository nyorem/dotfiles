#! /usr/bin/env bash
# Create a simple C/C++ Git repository
# $1 = name of the repositiry

if [ -z $1 ]; then
	REPO=repo
else
	REPO="$1"
fi

mkdir $REPO
cd $REPO

SRCDIR=src
INCDIR=inc
OBJDIR=obj
MAIN=$SRCDIR/main.cpp
README=README.md
GITIGNORE=.gitignore

# Directories
rm -rf inc src obj 2> /dev/null
mkdir $SRCDIR $INCDIR $OBJDIR

# Makefile generation
cp $HOME/projets/perso/gen-makefile/config.sh .

# Simple main file
rm -rf $MAIN 2> /dev/null
touch $MAIN

echo '#include <cstdlib>

int main (void) {
	return EXIT_SUCCESS;
}
' > $MAIN

# Simple README file
rm -rf $README 2> /dev/null
touch $README

echo '# bla
-----

## What ?

## Why ?

## How ?

### How to build it ?

### How to use it ?

## TODO

> Written with [StackEdit](https://stackedit.io/)' > $README

# Simple gitignore file
rm -rf $GITIGNORE 2> /dev/null
touch $GITIGNORE

echo '.DS_Store
*~
*.d
.*.swp
*.o
main' > $GITIGNORE

# Generating the initial Makefile
./config.sh

# Building
make

# Gitting
git init
git status
